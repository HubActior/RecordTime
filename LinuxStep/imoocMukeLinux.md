20191007，星期一，Tony老师，Linux系统工程师，红帽认证
第一节，Linux简介，一上来就讲背景了，在Linux之前有个Minix是Andrew S.Tanenbaum教授开发的，开源给大学做研究，其他人在用Minix时发现可以改进，但Andrew教授说，我开发这个系统只是为了教学，你们能够看懂，我的目的就达到了，Minix不需要更新优化。
之后1991年Linus Torvalds以Minix为模板，写了个Linux，至此与Unix就没啥关系了。以芬兰吉祥物企鹅作为图标，正确读法为李纳克斯、而国内通用读作李里克斯，两者都行。
Linux分为内核版本，www.kernel.org管理，开源下载。还有个是各个厂商的发行版本，主要是CentOS与Ubuntu，后者的图形界面更好看点，然而在服务器领域图形界面无足轻重，甚至可以不要，更加看重安全与稳定。
所以我们还是讲学RedHat，而CentOS完全免费，就学这个啥，另外RedHat还有个fedora系列，包含全部功能、但是稳定性只能靠使用进去维护，图形界面不比Ubuntu差了。但现在CentOS已经被RedHat收购，还能免费多久就不清楚了。
开源软件，
    使用自由，绝大多数免费，但与免费软件又不同
    研究自由，可获得软件源代码，学习研究
    散布及改良自由，改良功能甚至销售，但要求开源出去
但是国内的开源软件协议做得并不好，很好企业的产品源自开源软件，但是不想贡献出去，就加密、留后门各种操作。
另外内核版本与开源版本是区别的，不能这样类比，同时Linux严格区分大小写是正确的，要注意一下
国外有个www.netcraft.com网站，专门分析企业级的东西，可以看到全球服务器领域Apache+Ni占据80%、而Microsoft目前已不足20%，网站有个What's that site runing直观看到对应网站的信息，嵌入式设备里底层都是Linux或Unix，而windows的WForm和诺基压的境地差不多，很尴尬。
学习方法就很主观了，各位要清楚在互联网行业，只要涉及服务器的东西，Linux一直都是个朝阳行业。
如何学习，一对于问题、先要尝试自己解决，查看官网帮助文档，搜索引擎看示例等。二提问的智慧、问题尽量详尽具体，同时最好伴有报错的贴图，因为看到错误后有助于老师直观解决。
Linux与Windows的不同，在学习Linux的过程中要逐步抛弃Windows的东西，有以下几点
    Windows才有DOS命令窗口、而Linux是自带的命令行窗口，Linux严格区分大小写，而Windows里没有，
    Linux的需要永久保存的，如硬件、用户等所有内容都是以文件形式保存、而windows里会区分硬件、用户、软件等。Linux中不靠扩展名区分文件类型，是通过权限来区分，但是有一些约定俗成的东西。有这些扩展名后缀，只是为了方便管理员
    压缩包：*.gz、*.bz2、*.tar.bz2、*.tgz等
    二进制软件包：.rpm，网页文件：.html、.php
    脚本文件：.sh，配置文件：.conf
    Windows下的程序.exe不能直接在Linux中安装和运行，Windows下有大量的木马和其他病毒，Linux当然不需要，此外Linux中服务器应用软件绝对够了，但是娱乐游戏软件确实不足，人家就不是拿到娱乐的，有浏览器就够了。
强调一下，字符界面的优势，字符界面占用系统资源更少、相比图形界面有更多资源可用来与客户端对接，字符界面东西少、出错机率低
第二节，Linux系统安装
最开始初学还是建议使用虚拟机来操作，VMware就比较好，教学选用VMware8版本的，官网上下载的是要收费的。
    VMware主要特点：
    不需要分区或重新开机就能在同一台PC上使用两种以上OS
    本机系统可以与虚拟机系统网络通信
    可以设定并且随时修改虚拟机操作系统的硬件环境，磁盘
    学习操作系统时，非常容易把电脑玩崩溃，所以建议VMware学习，有个快照snapshoot，帮助恢复保存的那个状态
安装过程中，弹出加入启动项，应当准许其找启动需要的软件资源，再次强调，初学就安CentOS的32位就行，64位耗资更大，而且有兼容性的问题。虚拟机中删除其中的操作系统很简单，但是删除VMware本身是很麻烦的，有VMware_Install_Clearer可以帮忙，看来还得注意一下。网上资源后续课程会讲到！
那个安装软件时，还是建议C盘尽量只是放操作系统相关的内容，自己装东西时放到DE盘、资料放EF盘，那个重装系统时，只需要把C盘清空重装就好，其他盘就不用动，重装完成再配置一下环境就行。
系统分区，说了磁盘分区，分区类型
    主分区，最多只能有4个，512-64=448，448个字节放操作系统的东西，每个扇区占16字节。
    扩展分区，最多只能有1个，就是把其中一个主分区改成扩展分区，里面不能写入数据，只能包含逻辑分区
要注意格式化，并不是主观意义上的清空数据，而是指根据用户选定的文件系统（如FAT16、32，NTFS、EXT2、3、4等），在磁盘的特定区域写入特定数据，分区中划出一片用于存放文件分配表、目录表等用于文件管理的磁盘空间。U盘中常见的是FAT类型、Windows7默认只有NTFS，而Linux的CentOS6.3中是EXT4。
    数据块，Block默认大小4KB，分成等大小数据块。确实是会把数据清空，但不仅仅如此，主要是重建分配表。
硬件设备文件名，鼠标为例，/dev/mouse，树形目录，/是根，需要看懂含义就好。/dev/hda1、IDE硬盘接口，a1是第一个硬盘的第一个分区，命名还有些注意地方，扩展分区名。
挂载，Linux中没有盘符概念，必须分区，/根分区、swap交换分区，在内存大小4G以内，是内存的2倍、内存过8G就应当和内存一样大小。还有推荐分区/boot启动分区、200MB即可，拿目录做挂载点
一定要注意，虚拟机充电情况下，不能直接点红叉叉关闭，必然崩溃，应当关闭电源或者挂起。
安装时要注意，虚拟机设置里选择安装光盘、确定打开电源，鼠标点进虚拟机，再按F2键，更改Boot启动顺序，右箭头移动、Ctrl+Alt鼠标退出虚拟机，选中CD-RAM Driver先安装CentOS，虚拟机里面很智能，但是真机操作就必须要进行这步，看看Exit下保存否。
说说密码原则：
    复杂性，八位字符以上，不能是英文单词，不能和用户相关内容
    易记忆性，对自己有含义的名人警句、诗句、歌词都行
    时效性，每90天或者180天更换一次密码
软件包选择时，尽量选Minimal最小化、但为了讲课方便暂时安装Basic Server基本服务器，简单起见用户名默认为root，密码123456，ls可以看到有3个安装日志log。
推荐安装XShell来写命令，都选择SSH协议，界面好看点。
第三节，命令基本格式及文件处理命令
据统计目前Linux支持的命令达到3000个，但课程中只会用到200个左右，所以不用担心。首先认识一下命令提示符[root@localhost ~]#，其中root当前登录用户、也可以有其他user，localhost主机名、Linux中不以localhost来区分同一网络下的主机，都可以用。~当前所在目录（家目录）、#超级用户root的提示符，普通用户是$
    命令格式，命令 [选项] [参数]，大体遵循这个，选项分简化与完整，-a\--all，[]的内容表示可选。inode，ID结点
第一个8个，cd、ls，ls -l查看详细信息，Linux中只有七种文件类型，权限占十位，-表示普通文件、d目录、l软链接文件，另外四种不需要普通用户去管。另外九位三个一组，分u所有者、g所属组、o其他人，r读、w写、x执行，xcode。ls -lh人性化显示，任何操作系统都有隐藏文件，以.开头，目的是表示为系统文件，而在Windows下的各种病毒，都会把自己变成隐藏文件。
    mkdir、mkdir -p what/ok递归创建目录，cd简化操作cd ~与cd直接Enter都是直接进入当前用户的家目录，cd -进入上次目录，cd ..上一级目录，cd .进入当前目录，相对路径以当前目录为基准，cd ../usr回去，而绝对路径以根目录cd /usr。建议初学者都使用绝对路径，虽然麻烦，但是准备。支持命令与名称补全，养成使用Tab键的习惯。pwd、print working directory，记好起，已经四个命令了。
rmdir，remove empty d删除空白目录，有东西都不能删。更常用的是rm命令，本身是删文件，加了rm -r可以删目录，rm -f是强制删除的意思，执行rm时一定要小心清楚，删除的东西是什么，没有图形界面的回收站，删了就是删了。cp默认复制文件，cp -r才是复制目录，cp -p连带文件属性，cp -d复制链接属性，cp -a相当-pdr
所有内容属性，时间等都是一样的。ls -l与ll作用一样，大小名而已，当前也有剪切或改名命令，mv、不同目录下就是剪切，同一目录就是改名，如mv what there，在当前目录将what改名成there。
当前有八个命令了，要注意常见目录的作用。
    根目录下bin和sbin，usr目录下bin和sbin这四个目录都是用来保存系统命令的。sbin是只有super用户才有使用的，dev特殊文件保存目录，etc是系统默认的配置文件，lib函数库文件，media\mnt\misc三个空目录，proc和sys两个目录不能直接操作，保存的是内存的过载点。tmp临时文件目录，目前只需要关心home、root和tmp三个目录就行了。
链接命令ln、link，ln -s [原文件] [目录文件]，-s软链接，看硬链接特征：1拥有相同的i节点和存储block块，可看做是同一文件，可类比教室的前门后门，访问的是同一个位置。2可且只能通过i节点识别，3不能跨分区，4不能针对目录使用。推荐使用软链接，更加灵活，1类似Windows里的快捷方式，2拥有自己的i节点和Block，但数据块中只保存原文件的文件名和i节点号，没有实际文件数据，3其文件权限都为lrwxrwxrwx、其实权限还得看原文件的权限、表示的只是和原文件有一样的权限，4修改任意文件、另一个都改变，5删除原文件，则软链接不能使用了。
第四节，文件搜索命令，共五个命令
locate 文件名，在后台数据库中按文件名搜索、速度更快，/var/lib/mlocate，默认1000行更新一次，可以updatedb手动更新。搜索过程中会遵守/etc/updatedb.conf配置文件的设置，有些目录是不会去搜索的。
whereis 命令，搜索命令的位置，-b只查可执行文件、-m只查帮助文件，which搜索命令时，若命令有别名也会显示、cd命令是shell编程所带的，不在Linux命令之中，也有PATH环境变量的说法。各个位置以冒号:隔开，注意区分Windows的分号;如此哈
find命令，功能十分强大，find [搜索范围] [搜索条件]，实际情况下，必须避免在若大范围里去搜索，十分消耗电脑资源，Windows也是如此。find / -name install.log，默认完全匹配搜索，如果要模糊搜索就需要用到通配符，*任意内容、？任意一个字符、[]匹配任意其中一个字符，使用通配符需要双引号""起来。
    若加上iname就不区分大小写了，find /root -nouser查找没有所有者的文件，只有两类特殊，一类是内核中交互产生在sys和proc中的文件、一类是外部文件，如Windows编写的文件，或U盘拷贝到Linux中的文件。其余的nouser文件都可定义为垃圾文件，还可按时间来搜索，如下
        find /var/log/ -mtime +10
        -10，10天内、10，10那一天的24小时、+10，10天前
        atime、access，ctime、change，mtime、modify
        没有10天后这个概念哈，另外find . -size 25k按大小，25M，注意单位的大小写，确实是这样。结点inum
    find支持逻辑与或，find /etc -size +20k -a -size -50k，找出来满足条件的文件，然后再ls -lh看详细信息，
    也可以在末尾加上-exec ls -lh {} \，表示执行完find再执行ls -lh，注意固定格式。
grep，字符串命令，grep [选项] 字符串 文件名，-i忽略大小写、-v排队指定字符串，与find区别，find完全匹配、grep包含匹配，有个正则表达式的概念。find在系统当中搜索符合条件的文件名（通配符）、grep在文件当中搜索符合条件的字符串（正则表达式）
第五节，帮助命令，3个
man、manual，ls、list directory contents，man -f可以看到有几个级别的帮助，相当于whatis，man -k相当于approcess。
还有其他帮助，如ls --help，直观定位，以及help shell内核命令，help cd，用whereis来判断是否是内核命令，找不到执行文件就是了。还有个info命令，操作太复杂了。
第六节，压缩命令，
Windows压缩格式.zip、.rar，Linux中更多，如.zip、.gz、.bz2、.tar.gz、.tar.bz2，压缩文件比原文件还大是有可能的，因为压缩命令有大小撒。zip 压缩文件名 源文件，同理加-r目录，解压缩直接unzip 压缩文件，没有区分。rar是Windows下特有的压缩格式，压缩效率比zip更高。gzip 源文件，默认源文件会消失、可通过gzip -c 源文件 > 压缩文件，将源文件显示出来。需要注意，gzip -r 目录时，只是压缩目录下的所有子文件，而不能压缩目录。解压缩可以gzip -d 压缩文件，或者 gunzip 压缩文件。同样不会保留压缩文件，意味着默认源与压缩，留其一。
另外.bz2格式，bzip2 源文件，默认不保留源文件，可bzip2 -k，注意bzip2压根就不能压缩目录。解压缩bzip2 -d或bunzip2同理
    tar命令就是用来解决目录不能压缩的问题，tar -cvf 打包文件名 源文件，-c打包、-v显示过程、-f指定打包后的文件名。如tar -cvf what.tar what，-xvf解打包，先打包再压缩。有更加简洁的方式，tar -zcvf 压缩包名.tar.gz 源文件，
    -jcvf成.tar.bz2，可以指定解压缩目录tar -jxcf jp.tar.bz2 -C /tmp/，压缩到指定目录也可以，直接包名前加绝对路径。tar -ztvf test.tar.gz，只查看而非解压，注意t是test，测试查看的意思。着重后两种方式！
20191008，周二，第七节，关机与重启命令
[root@localhost ~]# shutdown [选项] 时间
    -c，取消前一个关机命令
    -h，关机，但是在服务器上，避免使用关机命令
    -r，重启
    时间，可以用now立即，也可以先看当前date，再设置定时关机，会把终端卡住，# shutdown -r 10:30 &，加个&意味着后台执行，不占界面
    有其他关机命令，但是相对来说，还是shutdown更安全
    # halt关机，poweroff关机，init 0关机
    其他重启命令，# reboot相对安全，但init 6就别用了。
    0-6七个系统运行级别，查询用# rnulevel，返回前一级别 当前级别，
    # cat /etc/inittab，修改默认级别，id:3:initdefault:可选3与5
    退出登录，在Windows叫注销，Linux中就是# logout，从一开始就应该养成良好习惯，光是关闭红叉，其实没有退出，次数多了会崩溃。
第八节，其他常用命令
    挂载mount，mount查询系统中已经挂载的设备，mount -a依据配置文件/etc/fstab的内容，自动挂载，都不要与修改它。
    正式讲挂载命令格式，# mount [-t 文件系统] [-o 特殊选项] 设备文件名 挂载点，文件系统：ext3\4、光盘的话是iso9660，记住就好
    特殊选项：atime/noatime、async/sync、exec/noexec、user/nouser，等一般默认的都是正确的。有个chmod 755 hello.sh，就相当给hello.sh赋了执行权限。
    其实挂载主要还是用来挂载光盘的，在真机中就是把光盘放入光驱中、虚拟机中就是点光盘映像，一定记得选已连接得行框。
    1首先在挂载目录下 mkdir /mnt/cdrom，建立挂载点
    2挂载光盘，mount -t iso9660 /dev/cdrom /mnt/cdrom/
        mount /dev/sr0 /mnt/cdrom/，两个都是一样的作用，sr0软链接关系，建议还是使用sr0
    卸载命令，umonut 设备文件名 挂载点，umout /mnt/cdrom/，卸载时先出去，才能卸载。
    挂载U盘，# fdish -l，先查看U盘设备文件名，是啥就sdb1处填啥
        # mount -t vfat /dev/sdb1 /mnt/usb/
    移动硬盘是NTFS系统的，Linux和Unix都是不支持的，所以Apple的电脑用移动硬盘也很麻烦，之后会讲到用网络传输才是便利。
用户登录查看命令，w直接回车就好，who看到用户，
    last，默认是读取/var/log/wtmp文件数据，可以看到所有用户登录信息，若发现不是自己登录的，就要考虑是否被黑客入侵了。
    lastlog，查看所有用户最后一次登录时间，默认读取/var/log/lastlog文件内容，一样不能用vi/vim打开，防止人为修改。
